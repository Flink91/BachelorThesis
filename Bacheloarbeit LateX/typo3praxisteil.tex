\chapter{Anpassung eines Typo3 Systems an die gesammelten Requirements}
\label{kap-typo3praxisteil}

Nach dem Erstellen einer simplen Typo3 Umgebung ist das Ziel dieses Teils die Untersuchung verschiedener Extensions, die zur Umsetzung der WegE Requirements genutzt werden können. Um die besten Extensions auswählen zu können, werden einige sinnvolle Kriterien benötigt. Nur wenige dieser Kriterien lassen sich generell auf alle Extensions anbringen. Wie auch bei der Wahl des CMS gibt es nicht die eine beste Lösung, sondern viele Optionen, die eigens gegeneinander abgewägt werden müssen. Nichtsdestotrotz sollte jede ernst zu nehmende Extension einige Punkte erfüllen.

\paragraph{Eigenschaften einer professionellen Extension}
\begin{itemize}
	\item \textbf{Einhalten der Typo3 Coding Guidelines}: Diese Guidelines decken die wichtigsten Aspekte einer guten Extension, wie Sicherheit, Erweiterbarkeit, Stabilität und Zukunftssicherheit, ab. https://docs.typo3.org/typo3cms/CodingGuidelinesReference/Index.html
	\item \textbf{Kompatibilität mit eigenem Typo3 System}: Natürlich soll die Extension für die jeweilige Version verfügbar sein und nicht im Konflikt mit anderen Extensions stehen. Außerdem sollte die Lizenz der Extension beachtet werden.
	\item \textbf{Extension Manual verfügbar} Eine offizielle Anleitung kann direkt auf der Downloadseite der Extension auf Typo3 verlinkt werden und ist unerlässlich für den richtigen Umgang mit einer Extension und sollte nicht fehlen.
\end{itemize}

Die erste Anlaufstelle zur Überprüfung dieser Eigenschaften ist die Downloadseite der Extension auf typo3.org. Diese bietet eine Übersicht über Version, Update, Alter, Kategorie, Autor und Downloadzahlen einer Extension. Die Anzahl der Downloads ist meistens ein guter Indikator für eine professionelle Extension, jedoch nicht immer. Deshalb sollte dieser mit Vorsicht genossen werden.

\begin{figure}
	\centering
	\includegraphics[width=0.75\linewidth]{abb/extensionseite.jpg}
	\caption[Extension Übersicht]{Übersicht einer Extension auf der Downloadseite}
	\label{fig:forumextension}
\end{figure}

Neben den oben genannten Kriterien gibt es noch ein hilfreiches Projekt namens Extension Comparison project\footnote{https://wiki.typo3.org/Extension\_Comparison} auf der Typo3 Wiki Webseite, die ein große Anzahl von Extensions gleicher Art jeweils vergleicht und so die Wahl erleichtert.

Für das WegE Projekt kommen prinzipiell nur professionelle Extensions in Frage. Besonders wichtig sind die Zukunftssicherheit und Stabilität. Darüber hinaus spielt der Aufwand eine wichtige Rolle. Lizenzkosten sollen möglichst vermieden werden.  

\section{Rechtemanagement und Authentikation}
Die Erstellung und das Management der Usergruppen, die für das WegE Projekt geplant sind, könnten sich als eine der schwierigsten Aufgaben entpuppen. Zum einen gibt es eine Menge Redakteure, für viele verschiedene Sektionen der Webseite. Dann soll es die Möglichkeit geben sich mittels Kennnummer der Universität einzuloggen und zum Schluss soll jeder interessierte User sich einen Account anlegen können, um zum Beispiel im Forum mitzuwirken. Daraus resultiert ein kompliziertes Rechtemanagement.

Wichtig hierbei die Unterscheidung von Backend Usern und Frontend Usern. Das Erstellen von Backend Usern lässt sich bequem über das Backend von Typo3 erledigen. Ein Administrator legt dafür einfach einen neuen Nutzer an und bestimmt die jeweiligen Rechte dieses Nutzers. Das werden zumeist Redakteure sein und da sich die Zahl dieser in Grenzen halten sollte, ist es möglich diese alle manuell anzulegen.

\subsection{Möglichkeiten}

Braucht eine Webseite nur Administratoren und einige Redakteure, also nur Backend User, so lässt sich das nur mit Typo3 allein bewerkstelligen. Dafür legt ein Administrator per Hand im Backend manuell neue Zugänge an. Das funktioniert nicht mit Frontend Usern.
Die momentan vorherrschende Methode zur Verwaltung von Frontend Usern ist die Extension sr\_feuser\_registration. Sie befindet sich in den meist heruntergeladenen Extensions, wurde bereits 2005 das erste mal veröffentlicht und wird in Version 4.0 angeboten. 


\subsection{Implementation}

Die Implementation dieser Extension verläuft, in Berücksichtigung der Größe des Vorhabens, sehr schnell ab.

\begin{figure}
	\centering
	\includegraphics[width=0.75\linewidth]{abb/fe_user.jpg}
	\caption[sr\_feuser\_register Extension]{Das erzeugte Registrierungsformular}
	\label{fig:feusersextension}
\end{figure}

\subsection{Evaluation}

Die Arbeit mit der sr\_feuser\_registration Extension stellte sich als sehr angenehm heraus. Das mag mitunter daran liegen, dass sie sich seit über 10 Jahren in Entwicklung befindet und in einem sehr ausgereiften Stadium befindet. Die Extension bietet so gut wie jede erdenkliche Funktion rund um das Thema Frontend User als Menüpunkt im Backend, sodass man schnell und ohne Anleitung ein funktionierendes Registrierungsformular aufsetzen kann. Es nutzt die bereits vorhandenen Funktionen von Typo3, womit es sich leicht definieren lässt, welche Seiten nur für registrierte User gedacht sind. Sind Frontend User auf einer Typo3 Seite nötig ist diese Extension eine optimale Lösung. Darüber hinaus gibt es viele Extensions, welche die Funktion von sr\_feuser\_registration erweitern.

\section{Blog und News}
Die Anzeige von News oder einem fortlaufenden Blog findet auf immer mehr Webseiten Relevanz. So ist es wenig verwunderlich, dass die bekannteste News-Extension von Typo3 auch eine der meistverwendeten Extensions überhaupt ist. Die populärste Wahl scheint dabei die Extension mit dem Namen \texttt{news} zu sein.

\subsection{Alternativen}
Eine weitere Extension, die für die Anzeige eines Blogs geeignet ist, heißt typo3\_blog. Die Extension steht der vorgestellten news Extension in Nichts nach, jedoch bietet die news Extension zwei Dinge in einem, news und Blog Funktionalität und deckt somit zwei mögliche Anforderungen der WegE Plattform ab. Somit minimiert die Wahl der news Extension theoretisch Installationsaufwand.

\subsection{Implementation}
Zu Beginn eine kleine Warnung: Eine Extension mit dem Namen \texttt{tt\_news} ist nicht mehr lauffähig und sollte nicht mit der Extension \texttt{news} verwechselt werden.\\
Nach dem Installieren der Extension findet sich im Menü des Typo3 Backend ein neuer Unterpunkt. Hier lassen sich neue News anlegen und verwalten. Vorerst müssen jedoch einige Seiten zur Anzeige der News angelegt werden. Im Page Menü erstellt man dazu eine Seite zum Anzeigen der Übersicht aller News. Hier werden kleine Vorschauen der News in einer Liste angezeigt. Dazu muss des Weiteren eine Unterseite zur News Übersichtsseite angelegt werden. Hier wird eine volle News angezeigt, sofern der User auf der Übersichtsseite auf den Auszug einer News klickt. Als letztes wird noch ein Ordner benötigt, in dem alle News gespeichert werden. Dieser wird im Webseitenbaum angelegt.\\
Beim Erstellen von Content auf der News Übersichtsseite und einem Klick auf Normal->Content, findet sich oben im Menü der Reiter Plugins. Hier taucht auch das News System auf. Dieses muss noch ein zweites Mal auf der Detailseite hinzugefügt werden. \\
Um diese Funktionalität der Detailseite zu bewerkstelligen müssen nach dem Erstellen dieser Seiten im Plugin einige Angaben gemacht werden. Beim Editieren des Plugins auf der News Übersichtsseite unter dem Reiter Plugin muss die List view ausgewählt sein. Diese erzeugt die gewünschte Übersicht aller News. Im Unterreiter Additional wird angegeben welche Seite für die Detailansicht verantwortlich sein soll. Im Plugin der Detailseite ist für die Detailansicht Detail view zu wählen und eine Referenz auf die Übersichtsseite zu setzen.\\
Unter dem News Menüpunkt lassen sich nun neue Artikel mit Tags, Bildern, Kategorien, Autor etc. erstellen, die bereits, wie gewollt, angezeigt werden.\\
Die Extension kommt mit einem eigenen Design daher, was für eine seriöse Anwendung natürlich angepasst werden müsste. Für diese Testumgebung bleibt es jedoch beim Standard-Design.
\begin{figure}
\centering
\includegraphics[width=0.75\linewidth]{abb/newsextension.jpg}
\caption[News Extension]{Das Ergebnis der news Extension}
\label{fig:newsextension}
\end{figure}


\subsection{Evaluation}
Die \texttt{news} Extension bietet alle Funktionalitäten, die man für die Anzeige von News jemals brauchen wird. Die Implementation geht schnell, wenn auch nicht unbedingt beim ersten Mal. Alles in Allem ist diese Extension eine exzellente Wahl.

\section{Forum}

Die Anforderung an ein Forum ist mit Sicherheit eines der aufwändigsten Teile dieses Projekts. Das bedeutet auch, dass eine hochwertige Extension hier eine große Zeitersparnis bedeuten kann. Ein Forum soll bestimmten Nutzern erlauben neue Themen anzulegen. Diese Themen werden in Listen angeordnet und das Klicken eines Themas führt zu einer Unterseite, in der User dieses Thema diskutieren können. Der Content besteht dabei nicht nur aus Text, sondern auch aus Bildern und eventuell aus Dateianhängen. Dazu soll es Funktionalität geben, all diesen Content editieren und löschen zu können und dabei diese Funktionalität sinnvoll nur bestimmten Nutzern zu geben. So soll zum Beispiel nur der Ersteller ein Thema wieder löschen können. Erreicht ein Forum eine bestimmte Größe ist es wünschenswert eine weitere Usergruppe definieren zu können, die ein Forum moderieren und somit die Rechte besitzen jegliche Anpassungen vorzunehmen. 

\subsection{Möglichkeiten}

Es gibt eigentlich nur eine Extension, die für Typo3 7.6 in Frage kommt und die heißt typo3\_forum. Sollte diese aus irgendwelchen Gründen als Möglichkeit ausscheiden kann man auf ein externes Forum Plugin zurückgreifen, das auf einer niedrigeren Ebene integriert wird. Ein etabliertes Beispiel heißt phpBB und bietet genau diese Funktionalität. Tatsächlich bietet phpBB mehr Anpassungsmöglichkeiten als die typo3\_forum Extension, ist aber auch mit etwas mehr Arbeit verbunden, da man aus der Typo3 Umgebung ausbricht.

\subsection{Implementation}

Die Implementation der grundlegensten Forum-Funktionalität fällt moderat aus. Nach der Installation wird ein Sysfolder benötigt und ein spezieller Forum-Record angelegt. In diesem lassen sich die Rechte für jegliche Funktionen genau anpassen. Beispielsweise welche Usergruppen in der Lage sind Antworten zu posten. Außerdem wird das Root Template mit der Extension erweitert. Zuletzt kommt man nicht drum herum etwas Typoscript zu schreiben. Es handelt sich hierbei jedoch nur um einen kleinen Schnipsel, der die Orte zur Anzeige des Forums und des Speichers über die PID definieren. Zusätzlich ist zu beachten, dass MySQL nicht im strict mode sein darf. Das lässt sich in der my.ini abschalten.

\begin{figure}
	\centering
	\includegraphics[width=0.75\linewidth]{abb/forumextension.png}
	\caption[Forum Extension]{Das Ergebnis der typo3\_forum Extension}
	\label{fig:forumextension}
\end{figure}

\subsection{Evaluation}

Grundsätzlich bietet dieses Forum alle Funktionen, die für ein vernünftiges WegE Forum nötig sind. Leider existieren zu diesem Zeitpunkt noch einige schwer nachvollziehbare Bugs. Ein Beispiel hierfür sind die Buttons zum Erstellen eines neuen Forumeintrages, die nicht immer angezeigt werden, wenn sie es sollten. Diese lassen sich durch individuelle Anpassungen soweit vermeiden, das bedeutet wiederum merh Aufwand. Da diese Extension jedoch noch sehr neu ist und von einem professionellen Team betreut wird, ist es gut möglich, dass sich dieser Fakt bereits in wenigen Monaten ändert.

\section{Anbindung an bestehende Systeme durch Datenimport}

\subsection{Möglichkeiten}

external\_import

\subsection{Implementation}

\subsection{Evaluation}


\section{Kalender}

Im Rahmen von WegE wäre eine Kalenderfunktion für verschiedene Aspekte interessant. Zum einen ließen sich so zukünftige Termine für die Öffentlichkeit anschaulich präsentieren. Zum anderen könnte ein Kalender Nutzern erlauben sich selbst in bestimmte Beratungstermine einzutragen. Besagte Termine sollen durch Redakteure erstellt werden können. Eine optimale Extension unterstützt also jene Features.

\subsection{Möglichkeiten}

Aufgrund der gesetzten Kriterien ist die einzig sinnvolle Wahl die Kalender Extension Calendar Base. Die Extension ist nicht bescheiden und behauptet alle Features anderer Extensions in eine Extension zu vereinen. Sie wird bereits seit 2006 entwickelt und regelmäßig aktualisiert. Mit über 60,000 Downloads ist sie eine der beliebtesten Extensions. Das Manual ist mit über 400 Seiten sehr ausführlich. Die Daten des Kalenders sind im iCal Format, was ein Standard für Kalenderinformationen ist. Der Kalender kann auch mit externen Kalendern, wie Google Calendar, zusammenarbeiten. Daten können sowohl im Backend und im Frontend eingetragen werden.

Alternativen zu Calendar Base sind eher rar gesät und bieten entweder weniger Features oder sind weniger ausgereift. Dies kann aber auch ein Vorteil sein. Sollte man nur bestimmte Features benötigen lässt sich eine Überladung von Features vermeiden. Ein Beispiel hierfür ist Event Calendar\footnote{https://docs.typo3.org/typo3cms/extensions/gb\_events/}. Es erlaubt einzig die Erstellung und Anzeige einer Liste von anstehenden Events. 

Für die Anforderungen des WegE Projekt ist Calendar Base am Besten geeignet und wird nun implementiert.

\subsection{Implementation}

\begin{figure}[h]
	\centering
	\includegraphics[width=0.75\linewidth]{abb/cal.jpg}
	\caption[Kalender Extension]{Das Ergebnis der cal Extension}
	\label{fig:calextension}
\end{figure}

Wie bei allen Extensions empfiehlt es sich, sich bei der Installation genau an das Manual zu halten, da viele der Extension Installationen einige Tücken bergen. Darüber hinaus verläuft die Installation von cal wie üblich. Die nötigen Templates werden hinzugefügt, eine Seite zum Halten der Extension erstellt und konfiguriert. Zuletzt bedarf es einer Zeile Typoscript zur Spezifikation des Sysfolders mit den Terminen.
\begin{verbatim}
options.tx_cal_controller.pageIDForPlugin = {PID}
\end{verbatim}
Es wird eine Seite zur Anzeige angelegt, welche das Plugin einbindet. Hier lassen sich verschiedene Dinge zur Anzeige steuert, es lässt sich einstellen welche Rechte nötig sind um Events zu abonnieren und es wird der Ordner spezifiziert, der die Kalendereinträge beherbergt.
In der Beispielimplementation können Events nur im Backend erstellt werden und im Frontend von jedem mittels Email abonniert werden. Handelt es sich bei einem Termin um einen Vortrag kann man so einen Überblick über die Anzahl der zu erwartenden Gäste erlangen. Handelt es sich bei dem Termin um eine Einzelsitzung, kann man dem Abonnent anschließend weitere Infos an die eingetragene Email senden. 

\subsection{Evaluation}

In der Testumgebung stellte sich das Setup der grundlegenden Features von Calendar Base als relativ einfach heraus. 
Es wird eine monatliche Ansicht angezeigt und auch die erstellten Events tauchen hier auf. Ein Klick auf ein bestimmtes Event zeigt weiter Infos und ein Feld zum Abonnieren des Events via Email an. Lediglich eine Funktion zur Begrenzung von Abonnenten/Teilnehmern ist nicht so einfach zu finden. Wenn ein Nutzer seine Email zu einer Einzelbesprechung angibt und somit diesen Termin für sich beansprucht, wäre es praktisch diesen Termin als reserviert anzuzeigen. Dies würde eigene Programmierarbeit erfordern. 

\section{Weitere nützliche Extensions}

\subsubsection{RealURL}

\subsubsection{SEO}

\subsubsection{YAG - Yet another Gallery}

Will man auf einer Webseite sehr viele Bilder anzeigen, ist es ratsam diese ein wenig zu strukturieren. Das geschieht meist durch die Aufteilung in Galerien und Alben. Dieses sollen dem Betrachter natürlich auch ansprechend präsentiert werden. Beide dieser Anforderungen werden von der YAG Extension erfüllt. Die Installation ist sehr einfach, zu beachten ist jedoch, dass eine nahtlose Integration nicht trivial ist und einige Anpassungen vorgenommen werden um eine ansprechende Ausgabe zu bekommen. 

\subsubsection{Grid Elements}

\subsubsection{Powermail}

Eine sehr einfach klassifizierbare Extension ist Powermail. Sie erfüllt den Zweck ein Formular anzuzeigen, durch das ein Nutzer der Seite eine Nachricht senden kann ohne in ein externes Mailingprogramm zu wechseln. Dies findet im WegE Projekt als Anlaufstelle eine Verwendung. Die Installation gestaltet sich sehr einfach und alle Aspekte eines solchen Formulars lassen sich bequem über das Backend anpassen. Das Formular wird als Plugin in die Seite integriert, bekommt ein erstelltes Formular zugewiesen, erhält einen Include im Template und schon ist es betriebsfähig. Die einzige etwas speziellere Anforderung an diese Extension, die das WegE Projekt haben könnte, wäre die Möglichkeit unterschiedlicher Empfängeradressen in unterschiedlichen Formularen. Auch das ist kein Problem. Die Wahl auf Powermail fiel aufgrund der Popularität und Stabilität. Andere ähnliche Extensions unterscheiden sich jedoch kaum.

\begin{figure}
\centering
\includegraphics[width=0.5\linewidth]{abb/powermail.jpg}
\caption[Powermail Extension]{Ein Formular erstellt mit Powermail}
\label{fig:powermail}
\end{figure}


\section{Wartung und Sicherheit}


